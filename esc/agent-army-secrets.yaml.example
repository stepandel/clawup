# Pulumi ESC Environment Template: agent-army-dev
#
# This file documents all secrets required for the agent-army multi-agent stack.
# Copy this structure to your Pulumi ESC environment.
#
# Setup:
#   1. Create environment: pulumi env init <org>/agent-army-dev
#   2. Edit environment: pulumi env edit <org>/agent-army-dev
#   3. Copy the structure below and fill in your values
#
# Reference: https://www.pulumi.com/docs/esc/

values:
  # =========================================================================
  # REQUIRED - Shared Credentials
  # =========================================================================

  # Anthropic API key for all agents (required for backward compatibility)
  # Get from: https://console.anthropic.com/account/keys
  anthropicApiKey:
    fn::secret: "sk-ant-api03-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

  # Tailscale auth key (reusable, ephemeral recommended for auto-cleanup)
  # Get from: https://login.tailscale.com/admin/settings/keys
  # Settings: Reusable=yes, Ephemeral=yes, Expiry=90 days
  tailscaleAuthKey:
    fn::secret: "tskey-auth-XXXXXXXXXXXXXXXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

  # Your Tailnet DNS name
  # Find at: https://login.tailscale.com/admin/dns
  # Example: tail12345.ts.net
  tailnetDnsName: "YOUR_TAILNET.ts.net"

  # Owner name (used in workspace file templates)
  ownerName: "Your Name"

  # Default model for agents (e.g., anthropic/claude-sonnet-4, openai/gpt-4o)
  defaultModel: "anthropic/claude-sonnet-4"

  # =========================================================================
  # OPTIONAL - Additional Model Provider API Keys
  # =========================================================================
  # Configure API keys for providers beyond Anthropic.
  # Only configure the providers you need.

  # OpenAI API Key
  # Get from: https://platform.openai.com/api-keys
  # OPENAI_API_KEY:
  #   fn::secret: "sk-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

  # OpenCode Zen API Key
  # Get from: https://opencodezen.com/account
  # OPENCODE_ZEN_API_KEY:
  #   fn::secret: "YOUR_OPENCODE_ZEN_API_KEY"

  # Google Gemini API Key
  # Get from: https://aistudio.google.com/apikey
  # GOOGLE_API_KEY:
  #   fn::secret: "YOUR_GOOGLE_API_KEY"

  # =========================================================================
  # OPTIONAL - Per-Agent Slack Credentials (Socket Mode)
  # =========================================================================
  # Create a Slack app for each agent with Socket Mode enabled.
  # Get from: https://api.slack.com/apps
  #
  # Required:
  #   - Bot Token (xoxb-...): OAuth & Permissions > Bot User OAuth Token
  #   - App Token (xapp-...): Basic Information > App-Level Tokens (connections:write scope)
  #
  # Required Bot Token scopes: 
  #   chat:write, channels:history, channels:read, users:read, 
  #   app_mentions:read, im:history, im:read, im:write

  # PM Agent (Sage) - Slack
  pmSlackBotToken:
    fn::secret: "xoxb-PM-SLACK-BOT-TOKEN"
  pmSlackAppToken:
    fn::secret: "xapp-PM-SLACK-APP-TOKEN"

  # Eng Agent (Titus) - Slack
  engSlackBotToken:
    fn::secret: "xoxb-ENG-SLACK-BOT-TOKEN"
  engSlackAppToken:
    fn::secret: "xapp-ENG-SLACK-APP-TOKEN"

  # Tester Agent (Scout) - Slack
  testerSlackBotToken:
    fn::secret: "xoxb-TESTER-SLACK-BOT-TOKEN"
  testerSlackAppToken:
    fn::secret: "xapp-TESTER-SLACK-APP-TOKEN"

  # =========================================================================
  # OPTIONAL - Per-Agent Linear Credentials
  # =========================================================================
  # Create personal API keys or use OAuth tokens for each agent.
  # Get from: https://linear.app/settings/api

  # PM Agent (Sage) - Linear (read + write for project tracking)
  pmLinearApiKey:
    fn::secret: "lin_api_PM_TOKEN"

  # Eng Agent (Titus) - Linear (read + write for ticket updates)
  engLinearApiKey:
    fn::secret: "lin_api_ENG_TOKEN"

  # Tester Agent (Scout) - Linear (read + write for verification status)
  testerLinearApiKey:
    fn::secret: "lin_api_TESTER_TOKEN"

  # =========================================================================
  # OPTIONAL - Per-Agent Brave Search API Keys
  # =========================================================================
  # Get from: https://brave.com/search/api/

  pmBraveSearchApiKey:
    fn::secret: "BSA-PM-API-KEY"
  engBraveSearchApiKey:
    fn::secret: "BSA-ENG-API-KEY"
  testerBraveSearchApiKey:
    fn::secret: "BSA-TESTER-API-KEY"

  # =========================================================================
  # OPTIONAL - Per-Agent GitHub Tokens
  # =========================================================================
  # Create personal access tokens (fine-grained recommended) for gh CLI.
  # Get from: https://github.com/settings/tokens?type=beta
  # Required scopes depend on agent needs (e.g., repo, read:org)

  # PM Agent (Sage) - GitHub (for repo access, PR reviews)
  pmGithubToken:
    fn::secret: "github_pat_PM_TOKEN"

  # Eng Agent (Titus) - GitHub (for code push, PR creation)
  engGithubToken:
    fn::secret: "github_pat_ENG_TOKEN"

  # Tester Agent (Scout) - GitHub (for issue creation, CI status)
  testerGithubToken:
    fn::secret: "github_pat_TESTER_TOKEN"

  # =========================================================================
  # OPTIONAL - Hetzner Cloud Credentials
  # =========================================================================
  # Required only if deploying to Hetzner Cloud instead of AWS.
  # Get from: https://console.hetzner.cloud/ → Select Project → Security → API Tokens
  # Create a token with Read & Write permissions.
  #
  # Hetzner offers significant cost savings compared to AWS:
  #   - CX21 (2 vCPU, 4GB RAM): ~€5.18/month vs AWS t3.medium ~$33/month
  #   - European data centers with excellent connectivity
  #   - Simple, predictable pricing

  hcloudToken:
    fn::secret: "HETZNER-API-TOKEN-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

  # =========================================================================
  # OPTIONAL - Additional Credentials
  # =========================================================================
  # Add more secrets as needed for your agents:
  #
  # AWS credentials (if agents need direct AWS access):
  # awsAccessKeyId:
  #   fn::secret: "AKIAXXXXXXXXXXXXXXXX"
  # awsSecretAccessKey:
  #   fn::secret: "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

# =========================================================================
# Environment Inheritance (Optional)
# =========================================================================
# You can import from other ESC environments:
#
# imports:
#   - org/shared-credentials
#
# This lets you share common secrets (like anthropicApiKey) across projects.
