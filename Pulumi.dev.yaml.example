# Pulumi Stack Configuration - Development Environment
#
# This configuration pulls secrets from Pulumi ESC.
# See esc/clawup-secrets.yaml.example for the ESC environment template.
#
# Setup:
#   1. Create ESC environment: pulumi env init <org>/clawup-dev
#   2. Copy secrets from esc/clawup-secrets.yaml.example
#   3. Run: pulumi up

environment:
  - clawup-dev

config:
  # AWS region for deployment
  aws:region: us-east-1

  # Tailscale DNS name (your tailnet domain)
  # Example: tail12345.ts.net
  clawup:tailnetDnsName: ${esc:tailnetDnsName}

  # Instance type for all agents
  # WARNING: t3.micro is too small (1GB RAM insufficient)
  clawup:instanceType: t3.medium

  # Owner name (used in workspace templates)
  clawup:ownerName: ${esc:ownerName}

  # Shared secrets (pulled from ESC)
  clawup:anthropicApiKey:
    fn::secret: ${esc:anthropicApiKey}
  clawup:tailscaleAuthKey:
    fn::secret: ${esc:tailscaleAuthKey}

  # =========================================================================
  # Per-agent Slack credentials (Socket Mode)
  # =========================================================================
  # Bot Token (xoxb-...) + App Token (xapp-...) for each agent

  clawup:pmSlackBotToken:
    fn::secret: ${esc:pmSlackBotToken}
  clawup:pmSlackAppToken:
    fn::secret: ${esc:pmSlackAppToken}

  clawup:engSlackBotToken:
    fn::secret: ${esc:engSlackBotToken}
  clawup:engSlackAppToken:
    fn::secret: ${esc:engSlackAppToken}

  clawup:testerSlackBotToken:
    fn::secret: ${esc:testerSlackBotToken}
  clawup:testerSlackAppToken:
    fn::secret: ${esc:testerSlackAppToken}

  # =========================================================================
  # Per-agent Linear credentials
  # =========================================================================

  clawup:pmLinearApiKey:
    fn::secret: ${esc:pmLinearApiKey}
  clawup:engLinearApiKey:
    fn::secret: ${esc:engLinearApiKey}
  clawup:testerLinearApiKey:
    fn::secret: ${esc:testerLinearApiKey}

